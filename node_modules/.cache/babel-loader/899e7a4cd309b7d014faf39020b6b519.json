{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dennyrthaher/Documents/generasi-gigih-homework/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dennyrthaher/Documents/generasi-gigih-homework/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dennyrthaher/Documents/generasi-gigih-homework/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useState}from'react';import SectionTitle from'../components/SectionTitle/index';import SongItem from'../components/SongItem/index';import SearchBar from'../components/SearchBar/index';import CreatePlaylistForm from'../components/CreatePlaylistForm/index';import axios from'axios';import'./style.css';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useSelector=useSelector(function(state){return state.token;}),accessTokenBearer=_useSelector.accessTokenBearer;var initialData=null;var _useState=useState(initialData),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([\"\"]),_useState4=_slicedToArray(_useState3,2),selectedList=_useState4[0],setSelectedList=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];var getData=function getData(data){setData(data);};var pushToSelectedList=function pushToSelectedList(id){var currentList=selectedList;currentList.push(id);setSelectedList(currentList);};var deleteFromSelectedList=function deleteFromSelectedList(id){var currentList=selectedList;for(var i=0;i<selectedList.length;i++){if(selectedList[i]===id){currentList.splice(i,1);}}setSelectedList(currentList);};var getStatus=function getStatus(id){var status=false;for(var i=0;i<selectedList.length;i++){if(selectedList[i]===id){status=true;}}return status;};var getCurrentUserId=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://api.spotify.com/v1/me?\",{headers:{Authorization:accessTokenBearer}});case 3:response=_context.sent;setUserId(response.data.id);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getCurrentUserId(){return _ref.apply(this,arguments);};}();var listData;if(data!=null){listData=data.tracks.items.map(function(item){var status=getStatus(item.uri);return/*#__PURE__*/_jsx(SongItem,{imgUrl:item.album.images[0].url,songTitle:item.album.name,artist:item.artists[0].name,artistLink:item.artists[0].external_urls.spotify,id:item.uri,status:status,pushToSelectedList:pushToSelectedList,deleteFromSelectedList:deleteFromSelectedList},item.id);});}getCurrentUserId();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(CreatePlaylistForm,{userId:userId,selectedTracks:selectedList}),/*#__PURE__*/_jsx(SectionTitle,{title:\"Search your favorite albums!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(SearchBar,{getData:getData}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"grid-container\",children:listData})]});};export default HomePage;","map":{"version":3,"sources":["/Users/dennyrthaher/Documents/generasi-gigih-homework/my-app/src/pages/HomePage.tsx"],"names":["React","useState","SectionTitle","SongItem","SearchBar","CreatePlaylistForm","axios","useSelector","HomePage","state","token","accessTokenBearer","initialData","data","setData","selectedList","setSelectedList","userId","setUserId","getData","pushToSelectedList","id","currentList","push","deleteFromSelectedList","i","length","splice","getStatus","status","getCurrentUserId","get","headers","Authorization","response","console","error","listData","tracks","items","map","item","uri","album","images","url","name","artists","external_urls","spotify"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState } from 'react';\nimport SectionTitle from '../components/SectionTitle/index';\nimport SongItem from '../components/SongItem/index';\nimport SearchBar from '../components/SearchBar/index';\nimport CreatePlaylistForm from '../components/CreatePlaylistForm/index';\nimport axios, { AxiosResponse } from 'axios';\nimport './style.css';\nimport { useSelector } from 'react-redux';\n\nconst HomePage = () => {\n    \n    const {accessTokenBearer} = useSelector((state: any) => state.token)\n\n    const initialData: any = null\n    const [data,setData] = useState(initialData);\n    const [selectedList,setSelectedList] = useState([\"\"]);\n    const [userId,setUserId] = useState(\"\");\n\n    const getData = (data: any) => {\n        setData(data);\n    }\n\n    const pushToSelectedList = (id: string) => {\n        const currentList: string[] = selectedList;\n        currentList.push(id);\n        setSelectedList(currentList);\n    }\n\n    const deleteFromSelectedList = (id: string) => {\n        const currentList: string[] = selectedList;\n        for (var i = 0;i<selectedList.length;i++){\n            if (selectedList[i] === id){\n                currentList.splice(i,1);\n            }\n        }\n        setSelectedList(currentList);\n    }\n\n    const getStatus = (id: string) => {\n        let status: boolean = false;\n        for (var i = 0;i<selectedList.length;i++){\n            if (selectedList[i] === id){\n                status = true\n            }\n        }\n        return status;\n    }\n\n    const getCurrentUserId = async() => {\n        try {\n            const response: AxiosResponse<any> = await axios.get(\"https://api.spotify.com/v1/me?\",{\n                headers: {\n                    Authorization: accessTokenBearer,\n                }\n            })\n            setUserId(response.data.id)\n        } catch(error){\n            console.error(error);\n        }\n    }\n\n    let listData;\n    if (data != null){\n        listData = data.tracks.items.map((item: any)=>{\n            const status = getStatus(item.uri)\n            return (\n                <SongItem\n                    key = {item.id}\n                    imgUrl = {item.album.images[0].url}\n                    songTitle = {item.album.name}\n                    artist = {item.artists[0].name}\n                    artistLink = {item.artists[0].external_urls.spotify}\n                    id = {item.uri}\n                    status = {status}\n                    pushToSelectedList = {pushToSelectedList}\n                    deleteFromSelectedList = {deleteFromSelectedList}\n                />\n            )\n        })\n    }\n\n    getCurrentUserId();\n    return(\n        <div className=\"App\">\n            <CreatePlaylistForm userId={userId} selectedTracks={selectedList}></CreatePlaylistForm>\n            <SectionTitle title=\"Search your favorite albums!\"/>\n            <br></br>\n            <SearchBar getData={getData}></SearchBar>\n            <br></br>\n\n            <div className=\"grid-container\">\n                {listData}\n            </div>\n            \n        </div>\n    );\n}\n\nexport default HomePage;"]},"metadata":{},"sourceType":"module"}